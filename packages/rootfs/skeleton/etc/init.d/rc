#!/bin/sh

. /etc/default/rc
. ${rc_functions}

# This sets a few default terminal options.
stty sane

# These 3 signals will not cause our script to exit.
trap "" INT QUIT TSTP

[ "${1}" != "" ] && runlevel=${1}

if [ "${runlevel}" == "" ]; then
	echo "Usage: ${0} <runlevel>" >&2
	exit 1
fi

if [ ! -d "${rc_base}/rc.${runlevel}.d" ]; then
	warning_msg "${rc_base}/rc.${runlevel}.d does not exist."
	exit 1
fi

for i in $(ls -v ${rc_base}/rc.${runlevel}.d/S* 2> /dev/null ); do
	case ${runlevel} in
		0|6|shutdown)
			${i} stop
			;;
		*)
			${i} start
			;;
	esac
done

#case ${1} in
	#sysinit)
	#echo The init script rcS starts execution. 
	#echo
	#echo Starting system...

	#mount -a
	#mount -n -o remount,rw /

	## Set the hostname of the target board.
	#hostname -F /etc/hostname

	##echo Starting Network
	##/sbin/ifconfig eth0 192.168.0.2 netmask 255.255.255.0
	##/sbin/route add default gw 192.168.0.254 eth0
	#;;
	#*)
	#echo "TODO: rc $1"
#esac
 
#echo System Started.
